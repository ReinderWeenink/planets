version: '3.8'

services:
  backend-app:
    # 1. Build the image using the Dockerfile located in the current directory ('.').
    build:
      context: .
    
    # 2. Map the container port (80) to the host port (80).
    #    Access the application via http://localhost/ or your IP address.
    ports:
      - "80:80" 
      
    # 3. Assign a friendly name to the container instance.
    container_name: planet_name_generator
    
    # 4. Configure the container to restart automatically unless it is explicitly stopped.
    restart: unless-stopped
    
    # 5. Health Check configuration
    healthcheck:
      # *** CHANGE THIS LINE ***
      test: ["CMD", "curl", "--fail", "http://localhost/health"] 
      start_period: 5s 
      interval: 30s
      timeout: 10s
      retries: 3